<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Compiled and minified JQuery -->
    <script src="JS/jquery.min.js"></script>
    <!-- Compiled and minified CSS -->
    <link rel="stylesheet" href="CSS/materialize.min.css">
    <!-- Compiled and minified JavaScript -->
    <script src="JS/materialize.min.js"></script>
    <!-- Compiled Icons -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!-- Font Awesome CDN -->
    <link href="CSS/font-awesome.min.css" rel="stylesheet">
    <link rel="stylesheet" href="CSS/style.css" />
    <title>CovidLive</title>
    <style type="text/css">
    #form1 .label-icon i {
        margin-top: 50%;
        transform: translateY(-25%);
    }

    #form1 .input-field {
        height: 55px;
        top: 50%;
        transform: translateY(-50%);
    }

    .row .card {
        margin: 0 !important;
        border-radius: 0 !important;
        box-shadow: none !important;
    }
    </style>
</head>

<body style="display: flex;flex-direction: column;height: 100vh;">
    <div id="navigation">
        <nav>
            <div class="nav-wrapper header">
                <a href="/home" class="brand-logo">
                    <span>CovidLive</span>
                </a>
                <a href="#" data-target="mobile-demo" class="sidenav-trigger"><i class="material-icons">menu</i></a>
                <a href="" class="secondary-content refresh waves-effect waves-light" style="margin-right: 15px">
                    <i class="material-icons">refresh</i>
                </a>
            </div>
            <ul class="sidenav header" id="mobile-demo">
                <li class="accent" style="padding-top: 10px;">
                    <div class="container" style="font-size:18px">
                        <i style="font-size: 48px;margin:0" class="large material-icons row">account_box</i>
                        <div style="width: 100%" class="waves-effect row">
                            <span class="col s10">Hello, user</span><span style="padding-top: 10px;" class="col s1 material-icons">arrow_forward</span>
                        </div>
                    </div>
                </li>
                <li><a href="/home" class="waves-effect waves-accent icon-white">Home<i class="material-icons icon-white">home</i></a></li>
                <li><a href="/categories" class="waves-effect waves-accent icon-white">Categories<i class="material-icons icon-white">format_list_bulleted</i></a></li>
                <li><a href="/cart" class="waves-effect waves-accent icon-white">Cart<i class="material-icons icon-white">shopping_cart</i>
                        <span class="cart-value-text cart-value hide right" style="top:50%;transform:translateY(-50%);right: 10%;border-radius: 5px">5</span>
                    </a>
                </li>
                <hr>
                <li><a href="/contact" class="waves-effect waves-accent icon-white">Contact Us<i class="material-icons icon-white">email</i></a></li>
                <li><a href="/login" class="waves-effect waves-accent icon-white">FAQs<i class="material-icons icon-white">question_answer</i></a></li>
            </ul>
            <div class="fixed-action-btn horizontal hide-on-large-only">
                <a class="btn-floating btn-large accent waves-effect waves-light">
                    <i class="large material-icons">live_help</i>
                </a>
                <div class="cart-value-text cart-value hide">5</div>
                <ul>
                    <li><a href="/checkout" class="btn-floating red " title="Check Out"><i class="material-icons">call</i></a></li>
                    <li><a href="/cart" class="btn-floating yellow darken-1" title="View Cart"><i class="material-icons">info</i></a></li>
                </ul>
            </div>
    </div>
    <main style="flex-grow: 1;overflow: auto;position: relative;">
        <div id="content" style="flex-grow: 1;">
            <div class="container-fluid">
                <h6 class="font-weight-bold" style="padding: 10px">LATEST UPDATE</h6>
                <div class="row d-flex" style="flex-direction: row;flex-wrap: wrap">
                    <div class="card col s6 black white-text waves-light">
                        <h4 class="grey-text" id="totalCases">15,452</h4>
                        <p>Cases</p>
                    </div>
                    <div class="card col s6 grey lighten-2">
                        <h4 class="grey-text text-darken-2" id="activeCases">15,452</h4>
                        <p>Active</p>
                    </div>
                    <div class="card col s6 green lighten-4">
                        <h4 class="green-text" id="recovered">15,452</h4>
                        <p>Recovered</p>
                    </div>
                    <div class="card col s6 red lighten-4">
                        <h4 class="red-text" id="deaths">15,452</h4>
                        <p>Casualities</p>
                    </div>
                    <div class="card col s6 yellow lighten-4">
                        <h4 class="yellow-text text-darken-3" id="critical">15,452</h4>
                        <p>Serious cases</p>
                    </div>
                    <div class="card col s6 brown lighten-4">
                        <h4 class="brown-text" id="totalCountries">15,452</h4>
                        <p>Countries, areas or territories with cases</p>
                    </div>
                    <a href="coronaProject.html" class="p2">> countrywise data</a>
                </div>
                <h6 class="font-weight-bold" style="padding: 10px">TODAY'S DATA</h6>
                <div class="row d-flex" style="flex-direction: row;flex-wrap: wrap">
                    <div class="card col s6 grey lighten-3">
                        <h4 class="grey-text text-darken-2" id="todayCases">15,452</h4>
                        <p>New Cases</p>
                    </div>
                    <div class="card col s6 red lighten-4">
                        <h4 id="todayDeaths" class="red-text">15,452</h4>
                        <p>Total Cases</p>
                    </div>
                </div>
                <div class="container">
                    <h6 class="font-weight-bold">Amitabh Bachchan's message on COVID-19</h6>
                    <iframe width="100%" height="300" src="https://www.youtube.com/embed/v-852f1PXBo" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                </div>
                <div class="card green">mohfw Website</div>
            </div>
        </div>
        <div style="position: absolute;top: 50%;left: 50%;transform:translate(-50%,-50%);">
            <div class="preloader-wrapper big active">
                <div class="spinner-layer spinner-blue-only">
                    <div class="circle-clipper left">
                        <div class="circle"></div>
                    </div>
                    <div class="gap-patch">
                        <div class="circle"></div>
                    </div>
                    <div class="circle-clipper right">
                        <div class="circle"></div>
                    </div>
                </div>
            </div>
        </div>
    </main>
    <script>
    $(document).ready(function() {
        $('.sidenav').sidenav();
        $('.fixed-action-btn').floatingActionButton();
        FetchData()
        $(".refresh").click(e => {
            e.preventDefault();
            $(".toast").hide();
            M.toast({ html: 'Fetching latest data...' })
            $(".preloader-wrapper").show()
        })
        $(".card").addClass("waves-effect")
        $(".card h4").text(0)
        $(document).on('swipe', w => {
            alert()
        })
    });

    function FetchData() {
        if (!localStorage.globalStats) {
            fetch("https://api.thevirustracker.com/free-api?global=stats")
                .then(e => e.json())
                .then(r => {
                    $(".preloader-wrapper").hide()
                    showData(r.results[0]);
                })
        } else
            showData(JSON.parse(localStorage.globalStats))
    }

    function showData(data) {
        console.log(data)
        $(".preloader-wrapper").hide()
        $("#totalCases").text(data.total_cases.toLocaleString());
        $("#deaths").text(data.total_deaths.toLocaleString());
        $("#activeCases").text(data.total_active_cases.toLocaleString());
        $("#recovered").text(data.total_recovered.toLocaleString());
        $("#critical").text(data.total_serious_cases.toLocaleString());
        $("#totalCountries").text(data.total_affected_countries.toLocaleString());
        $("#todayCases").text("+" + data.total_new_cases_today.toLocaleString());
        $("#todayDeaths").text("+" + data.total_new_deaths_today.toLocaleString());
    }

    function clearText() {
        localStorage.clear();
    }
    </script>
</body>

</html>